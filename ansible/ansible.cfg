[defaults]
# Using inventory from command line instead
# inventory = inventory.yml
host_key_checking = False
# Using default callback with yaml format for cleaner, more readable output in CI/CD
# Note: ansible.builtin.yaml was removed, use default with result_format=yaml instead
stdout_callback = ansible.builtin.default
result_format = yaml
deprecation_warnings = False
remote_user = root
# Using private key file specified in inventory
# private_key_file = ~/.ssh/do_key
timeout = 60
forks = 20
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts_cache
fact_caching_timeout = 7200

# SECURITY: Disable logging to prevent secrets from being written to disk
# log_path = ./ansible.log

# Output display options for cleaner CI/CD logs
display_args_to_stdout = False
display_skipped_hosts = False
# Show task file path on failure for easier debugging
show_task_path_on_failure = True
# Better error formatting
error_on_undefined_vars = True

# SECURITY: Hide sensitive task results
hide_sensitive_log = True

[ssh_connection]
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o ForwardAgent=yes
transfer_method = piped

# SECURITY: Disable SSH command logging
log_ssh_args = False
